# Bi-objective-vehicle-routing-integrating-k-shortest-paths:
This work is an extention for our previous work in the paper named "Predicting unsafe driving risk among commercial truck drivers using machine learning: Lessons learned from the surveillance of 20 million driving miles". [This is the code for machine learning methods can be found by the code for machine learing methods](https://mehdizadeamir.github.io/sce_predictions#3_predictive_modeling), created by Amir Mehdizade. Gernarlly speaking, we use the R for machine learning methods. Once the machine learning techniques are complete, we will produce risk indications and input them into the bi-objective ksp problem to assist the driver in selecting the best route while simultaneously taking into account travel time and risk.
1. By using the K-shortest paths algorithm, we can find the k best results based on either the total distance or the mean travel time for each alternative route. Regarding the mean travel time, it represents the travel time from DistanceAPI in Google. In this project, I used the distance between routes first, but it ended up with some unreasonable routes. The reason is that the shortest route can not ensure the route with the least travel time due to the speed limit. More specifically, the route between two locations with the least travel time usually results in a highway since the speed limit is higher than others and it won't have many traffic lights. Consequently, in this step, we will use the mean travel time as a criterion to identify the best alternative routes. 
Furthermore, to apply the k-shortest paths algorithm, we need to build the road network first. In other words, the nodes and links are essential. If the road network exists, we can use it directly. Otherwise, we need to extract the road network from the data we have. For this project, we selected the road network between Nashville, TN, and Gary, IL. 

2. After finding the alternative routes between Nashville and Gary, the problem becomes a bi-objective vehicle routing problem to find the optimal solution according to our two objectives, including the risk and real travel time. In terms of road risk, most of the research used accidents, while a few recent studies applied those safety-related critical events to represent the risk on the road. Usually, there are four different types of safety-critical events: hard break, headway, roll instability, and crash mitigation. There are two reasons to use safety-critical events as a pre-caution of accidents. Firstly, safety-related critical events are associated with real crashes. Secondly, compared with real accidents, it is more common for people to encounter them in real life, so we can include more data in our study. Moreover, in our previous research, we have applied 9 different machine learning methods to evaluate the relationship between the information related to the trip, driver, traffic, weather, and the sensor with the critical events. Also, the result shows the best model is XGB with an AUC of 0.765. To continue using those models, we need to prepare the information for the features in machine learning methods. More specifically, the weather is from Darksky.API. The speed mean is generated from the mean travel time and the distance from Google. The speed deviation is generated from the same distribution as our data sets. In the end, we will find the risk for each link at different times under various conditions. In the end, the risk in the objectives can be measured by those machine learning methods. It is noted that the risk for each link varies over time because the weather and traffic are time-related variables.

3.  In addition to risk, one of the goals for locating the best solutions includes real travel time. Because of the condition of the traffic, the travel time is a time-dependent variable in this stage. In other words, the mean speed varies depending on the flow of traffic. For instance, the speed is slower during rush hours than it is during non-peak hours.

4. Pareto ranking can be used to order the paths from the first step once we have the outcome from the first step and have examined at both goals for each option. There are two well-liked approaches to locating the ideal answer for multiple objective optimization. One combines the objectives using the average weighted method, while the other focuses on choosing the non-dominated solution. Here, we chose the driver's preferred route using the second method.
